<!DOCTYPE html>
<html>
<head>
    <title>User Profile</title>
</head>
<body>

<h1>User Profile</h1>

{% if user.is_authenticated %}
    <h2>Welcome, {{ user.username }}</h2>
    
    <form method="post" action="{% url 'update_profile' %}" enctype="multipart/form-data">
        {% csrf_token %}
        {% if form.errors %}
            <p style="color: red;">Please correct the errors below.</p>
        {% endif %}
        
        <!-- Display current user information -->
        {% if user.first_name %}
            <label for="id_first_name">First Name:</label>
            <input type="text" id="id_first_name" name="first_name" value="{{ user.first_name }}"><br><br>
        {% endif %}
        
        {% if user.last_name %}
            <label for="id_last_name">Last Name:</label>
            <input type="text" id="id_last_name" name="last_name" value="{{ user.last_name }}"><br><br>
        {% endif %}
        
        {% if user.email %}
            <label for="id_email">Email:</label>
            <input type="email" id="id_email" name="email" value="{{ user.email }}"><br><br>
        {% endif %}
        
        {% if user.dp %}
            <img src="{{ user.dp.url }}" alt="User Profile Picture" style="max-width: 200px; max-height: 200px;"><br><br>
        {% endif %}
        
        <!-- Fields for additional information -->
        <label for="id_additional_info">Additional Info:</label>
        <textarea id="id_additional_info" name="additional_info">{{ user.profile.additional_info }}</textarea><br><br>
        
        <label for="id_profile_pic">Profile Picture:</label>
        <input type="file" id="id_profile_pic" name="profile_pic"><br><br>
        
        <button type="submit">Update Profile</button>
    </form>
{% else %}
    <p>Please log in to view your profile.</p>
{% endif %}

</body>
</html>
